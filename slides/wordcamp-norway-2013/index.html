<!DOCTYPE html>

<!--
  Google HTML5 slide template

  Authors: Luke Mahé (code)
           Marcin Wichary (code and design)
           
           Dominic Mazzoni (browser compatibility)
           Charles Chen (ChromeVox support)

  URL: http://code.google.com/p/html5slides/
-->

<html>
<head>
	<title>Command Line Learnings For Make Benefit Glorious Nation of WordPress</title>

	<meta charset='utf-8'>
	<script src='./assets/slides.js'></script>

	<link rel="stylesheet" href='./assets/custom.css'></style>
	<link rel="stylesheet" href='./assets/prettyprint.css'></style>
</head>

<body style="display: none">

<section class='slides layout-regular template-default'>
  <p><article>
<h1>Hello,</h1></p>

<p>My name is Cristi Burcă.</p>

<p>The Internet calls me <strong>scribu</strong>.</p>

<p>I work on/with WordPress.
</article></p>

<p><article>
<h1>
    Command Line Learnings<br>
    For Make Benefit<br>
    Glorious Nation of WordPress
</h1></p>

<p><img id="boratpose" class="to-build centered vcentered" src="./assets/img/boratpose.jpg" /></p>

<p>WordCamp Norway 2013</p>

<p></article></p>

<p><article>
<h1>Command Line Interface?</h1></p>

<p>Haven&#39;t those gone extinct since the 90&#39;s?!
</article></p>

<p><article>
<h1>What is WP-CLI?</h1></p>

<ul class="build">
    <li>a command line interface for WordPress
    <li>written in PHP
    <li>free and open source
    <li>available on <a href="http://wp-cli.org">wp-cli.org</a>
</ul>

<p></article></p>

<p><article>
<h1>What is WP-CLI good for?</h1>
</article></p>

<p><article>
<h2>Automation</h2></p>

<div class="to-build">

<p>Task: Set up a cron script that periodically updates everything.</p>

<pre>
#!/bin/bash

cd /path/to/wp/install

wp db export /tmp/backup.sql

wp core update
wp theme update --all
wp plugin update --all

</pre>

</div>

<p></article></p>

<p><article>
<h2>Integration</h2></p>

<div class="to-build">

<p>Task: Access data in a WP install from a Python script.</p>

<pre>
import subprocess

def get_wp_option(key):
    command = ["wp", "option", "get", key]

    proc = subprocess.Popen(command, stdout=subprocess.PIPE)
    out, err = proc.communicate()

    return out.strip("\n")

print get_wp_option("home")

</pre>

</div>

<p></article></p>

<p><article>
<h2>Long running jobs</h2></p>

<p>Task: Regenerate all thumbnails on a site.</p>

<div class="in-the-middle to-build">
    <h3>GUI:</h3>

    <ul>
        <li>send AJAX request for each image
        <li>405 LOC
    </ul>
</div>

<div class="in-the-middle to-build">
    <h3>CLI:</h3>

    <ul>
        <li>simple <code>foreach</code> loop
        <li>117 LOC
    </ul>
</div>

<p></article></p>

<p><article>
<h2>Interactive debugging</h2></p>

<div class="to-build">
    <p>Task: Fool around.</p>



<pre>$ wp shell 
Type &quot;exit&quot; to close session.
wp&gt; get_bloginfo('description')
'Just another WordPress site'
wp&gt; strrev($_)
'etis sserPdroW rehtona tsuJ'
wp&gt;
</pre>

</div>

<p id="boratgreat" class="blue to-build"><strong>Great success!</strong></p>

<p></article></p>

<p><article>
<h2>Code generation</h2></p>

<p>Task: Create a plugin that registers a custom post type and a taxonomy.</p>

<pre>
wp scaffold plugin wcnorge

wp scaffold post-type slides --plugin=wcnorge

wp scaffold taxonomy slide_cat --post_types=slides --plugin=wcnorge

</pre>

<p></article></p>

<p><article>
<h2>What about X?</h2></p>

<p>WP-CLI is extensible; it will look for commands defined inside WordPress plugins or themes.</p>

<p>All you have to do is make sure WP-CLI is running:</p>
<div class="highlight"><pre><code class="text">if ( defined( &#39;WP_CLI&#39; ) &amp;&amp; WP_CLI ) {
    require __DIR__ . &#39;/my-cli-command.php&#39;;
}
</code></pre></div>
<p>More info:</p>

<p><a href="https://github.com/wp-cli/wp-cli/wiki/Creating-Commands">github.com/wp-cli/wp-cli/wiki/Creating-Commands</a>
</article></p>

<p><article>
<h2>How did WP-CLI get started?</h2></p>

<ul>
<li>Andreas Creten started it in early September, 2011.</li>
<li>I started contributing to it in late September, 2011.</li>
<li>Front page of Hacker News in October, 2011.</li>
<li>New contributors, additional features, talks at WordCamps etc.
</article></li>
</ul>

<p><article>
<q>If you can not able do it from command line, is not worth do it.</q>
<div class="author">DevOps Borat</div>
</article></p>

<p><article>
<h2>Thanks!</h2></p>

<ul>
<li>Site: <a href="http://scribu.net">scribu.net</a></li>
<li>Twitter: <a href="http://twitter.com/scribu">@scribu</a></li>
<li>Github: <a href="http://github.com/scribu">@scribu</a>
</article></li>
</ul>

</section>
</body>
</html>
